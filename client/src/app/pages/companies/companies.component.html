<app-nav></app-nav>
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h6 class="text-end">
        <i class="fa-solid fa-user"></i> {{ userLogged.username }}
      </h6>
    </div>
  </div>
  <div class="jumbotron">
    <h1 class="display-4"><i class="fa-solid fa-building"></i> Compañias</h1>
    <hr class="my-2" />
    <p class="lead">Registro de Empresas y Compañias</p>
    <div class="row mt-2">
      <div class="col-md-3">
        <div class="card border-primary mb-3">
          <div class="card-header">Agregar Nueva Empresa/Compañia</div>
          <div class="card-body">
            <form [formGroup]="companyForm">
              <fieldset>
                <div class="form-group">
                  <label for="name" class="form-label mt-4"
                    >Nombre de la Compañia</label
                  >
                  <input
                    type="text"
                    formControlName="company_name"
                    class="form-control"
                    id="company_name"
                    aria-describedby="emailHelp"
                    placeholder="Nombre de la Compañia"
                  />
                </div>
                <div class="form-group">
                  <label for="plant_type" class="form-label mt-4"
                    >Tipo de Planta</label
                  >
                  <input
                    type="text"
                    formControlName="plant_type"
                    class="form-control"
                    id="plant_type"
                    placeholder="Tipo de Planta"
                  />
                </div>
                <div class="form-group">
                  <label for="plant_code" class="form-label mt-4"
                    >Codigo de la Planta</label
                  >
                  <input
                    type="text"
                    formControlName="plant_code"
                    class="form-control"
                    id="plant_code"
                    placeholder="Codigo de la Planta"
                  />
                </div>
                <div class="form-group">
                  <label for="plant_name" class="form-label mt-4"
                    >Nombre de la Planta</label
                  >
                  <input
                    type="text"
                    formControlName="plant_name"
                    class="form-control"
                    id="plant_name"
                    placeholder="Nombre de la Planta"
                  />
                </div>
                <div class="form-group">
                  <label for="address" class="form-label mt-4"
                    >Direccion</label
                  >
                  <input
                    type="text"
                    formControlName="address"
                    class="form-control"
                    id="address"
                    placeholder="Direccion"
                  />
                </div>
                <div class="form-group">
                  <label for="phone" class="form-label mt-4"
                    >Numero de Telefono</label
                  >
                  <input
                    type="text"
                    formControlName="phone"
                    class="form-control"
                    id="phone"
                    placeholder="Numero de Telefono"
                  />
                </div>
                <div class="d-grid gap-2 mt-4 mb-3">
                  <button
                    class="btn btn-lg btn-primary"
                    type="submit"
                    (click)="edit ? updateCompany() : saveCompany()"
                  >
                    <i class="fa-solid fa-plus"></i> Salvar Compañia
                  </button>
                  <button
                    class="btn btn-lg btn-warning"
                    type="reset"
                    (click)="reset()"
                  >
                  <i class="fa-solid fa-soap"></i> Borrar Campos
                  </button>
                </div>
              </fieldset>
            </form>
          </div>
        </div>
      </div>
      <div class="col-md-9">
        <div class="row">
          <h5>Compañias Registradas</h5>
          <table *ngIf="companiesData.length > 0" class="table table-hover table-responsive table-striped">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Tipo de Planta</th>
                <th>Codigo de Planta</th>
                <th>Nombre de la Planta</th>
                <th>Fecha de Mantenimiento</th>
                <th>OPS</th>
              </tr>
            </thead>
            <tbody>
              <tr class="table-primary" *ngFor="let item of companiesData">
                <td>{{ item.company_name }}</td>
                <td>{{ item.plant_type }}</td>
                <td>{{ item.plant_code }}</td>
                <td>{{ item.plant_name }}</td>
                <td>{{ item.createdAt | date : "dd-MM-yyyy" }}</td>
                <td>
                  <i (click)="fillUpdateCompany(item._id)" class="fa-solid fa-pen-to-square text-primary"></i>
                  <i (click)="deleteCompany(item._id)" class="fa-solid fa-trash text-danger"></i>
                </td>
              </tr>
            </tbody>
          </table>
          <h5 *ngIf="companiesData.length == 0" class="text-info mt-4 text-center">No hay datos para mostrar</h5>
        </div>
      </div>
    </div>
  </div>
</div>
